{{- /* Script de detecção automática de idioma */}}
{{- /* Roda apenas na home ou quando não há preferência salva */}}
<script>
(function() {
    var STORAGE_KEY = 'pref-lang';
    var currentPath = window.location.pathname;

    // Detecta o idioma atual da página
    var currentLang = null;
    if (currentPath.startsWith('/pt-br')) {
        currentLang = 'pt-br';
    } else if (currentPath.startsWith('/en')) {
        currentLang = 'en';
    }

    // Se o usuário já escolheu um idioma manualmente, não redireciona
    var savedLang = localStorage.getItem(STORAGE_KEY);
    if (savedLang) {
        return;
    }

    // Só redireciona na primeira visita (home pages)
    // Não redireciona se o usuário veio de um link direto para um artigo
    var isHomePage = currentPath === '/' ||
                     currentPath === '/pt-br/' ||
                     currentPath === '/pt-br' ||
                     currentPath === '/en/' ||
                     currentPath === '/en';

    if (!isHomePage) {
        return;
    }

    // Detecta o idioma preferido do navegador
    var browserLangs = navigator.languages || [navigator.language || navigator.userLanguage];
    var prefersPt = false;

    for (var i = 0; i < browserLangs.length; i++) {
        var lang = browserLangs[i].toLowerCase();
        if (lang.startsWith('pt')) {
            prefersPt = true;
            break;
        }
        // Se encontrar inglês antes de português, prefere inglês
        if (lang.startsWith('en')) {
            break;
        }
    }

    // Redireciona se necessário
    var targetLang = prefersPt ? 'pt-br' : 'en';

    if (currentLang !== targetLang) {
        var newPath = '/' + targetLang + '/';
        window.location.replace(newPath);
    }
})();
</script>

{{- /* Favicon e ícones do site */}} <link rel="icon" type="image/x-icon"
href="{{ "/favicon.ico" | absURL }}"> <link rel="icon" type="image/svg+xml"
href="{{ "/favicon.svg" | absURL }}"> <link rel="icon" type="image/png"
sizes="96x96" href="{{ "/favicon-96x96.png" | absURL }}"> <link
rel="apple-touch-icon" sizes="180x180" href="{{ "/apple-touch-icon.png" | absURL
}}"> {{- /* Web App Manifest */}} <link rel="manifest" href="{{
"/site.webmanifest" | absURL }}"> {{- /* Meta tags para tema e cores */}}
<meta name="theme-color" content="#2e2e33" />
<meta name="msapplication-TileColor" content="#2e2e33" />

{{- /* Meta tags adicionais de SEO e otimização */}} {{- if hugo.IsProduction |
or (eq site.Params.env "production") }}
<meta name="format-detection" content="telephone=no" />
<meta name="mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta
  name="apple-mobile-web-app-status-bar-style"
  content="black-translucent"
/>
<meta name="apple-mobile-web-app-title" content="{{ site.Title }}" />
{{- end }} {{- /* Preconnect para melhor performance */}}
<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />
{{- if hugo.IsProduction -}}
<link rel="dns-prefetch" href="https://fonts.googleapis.com" />
<script defer src="https://cloud.umami.is/script.js" data-website-id="0055c26e-b668-4c34-a6af-86142c1cead5"></script>
{{- end -}}
